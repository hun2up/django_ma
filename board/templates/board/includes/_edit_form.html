<!-- django_ma/board/templates/board/includes/_edit_form.html -->

<!--
  Board Edit Form Include (Create/Edit Shared)
  - Used by: post_create/post_edit/task_create/task_edit
  - Renders a full HTML <form> wrapper and action buttons
  - Actual fields + attachment UI are delegated to: board/includes/_form_common.html

  Required context:
  - mode: "create" | "edit"
  - form
  - list_url
  - cancel_url

  Optional context:
  - action_url: explicit form action (recommended for create)
  - attachments: edit-only existing attachments list
  - attachment_download_name: download url name for existing attachments
  - form_id: DOM id for submit lock / file utils (default: "boardForm")
-->

{% with fid=form_id|default:"boardForm" %}
  <form
    id="{{ fid }}"
    method="post"
    action="{{ action_url|default:request.path }}"
    enctype="multipart/form-data"
  >
    <!-- CSRF Token -->
    {% csrf_token %}

    <!-- Shared Fields + Attachment UI -->
    {% include "board/includes/_form_common.html" with form=form mode=mode attachments=attachments attachment_download_name=attachment_download_name only %}

    <!-- Action Buttons -->
    <div class="d-flex flex-column flex-md-row justify-content-between mt-4 gap-2 board-edit-actions">
      <!-- List -->
      <a href="{{ list_url }}" class="btn btn-outline-secondary w-100 w-md-auto">목록으로</a>

      <!-- Cancel (back to detail on edit, back to list on create) -->
      <a href="{{ cancel_url }}" class="btn btn-outline-secondary w-100 w-md-auto">취소</a>

      <!-- Submit -->
      <button type="submit" id="submitBtn" class="btn btn-primary w-100 w-md-auto">
        {% if mode == "edit" %}수정 완료{% else %}등록하기{% endif %}
      </button>
    </div>
  </form>
{% endwith %}
