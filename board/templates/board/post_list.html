<!--django_ma/board/templates/board/post_list.html-->
{% extends 'base.html' %}

{% block title %}업무요청 게시판{% endblock %}

{% block content %}
<h3 class="mb-4 text-center" style="font-family:'Noto Sans KR', sans-serif; color:#003f7d; font-weight:700;">업무요청 게시판</h3>

<div class="card p-4 board-font">
  <div class="d-flex justify-content-between mb-3">
    <a href="{% url 'post_create' %}" class="btn btn-primary">[+] 새 글 작성</a>
  </div>

  <div class="table-responsive">
    <table class="table table-hover align-middle">
      <colgroup>
        <col style="width: 8%;">   <!-- 접수번호 -->
        <col style="width: 10%;">  <!-- 접수일자 -->
        <col style="width: 10%;">  <!-- 구분 -->
        <col style="width: 30%;">  <!-- 제목 -->
        <col style="width: 10%;">  <!-- 요청자 -->
        <col style="width: 10%;">  <!-- 담당자 -->
        <col style="width: 10%;">  <!-- 상태 -->
        <col style="width: 12%;">  <!-- 상태변경일 -->
      </colgroup>
      <thead class="table-light text-center">
        <tr>
          <th>접수번호</th>
          <th>접수일자</th>
          <th>구분</th>
          <th>제목</th>
          <th>요청자</th>
          <th>담당자</th>
          <th>상태</th>
          <th>상태변경일</th>
        </tr>
      </thead>
      <tbody>
        {% for post in posts %}
        <tr class="text-center">
          <td>{{ post.receipt_number }}</td>
          <td>{{ post.created_at|date:"Y-m-d" }}</td>
          <td>
            {{ post.category|default:"-" }}
          </td>
          <td class="text-start">
            <a href="{% url 'post_detail' post.pk %}" class="text-decoration-none text-primary">
              {{ post.title }}
            </a>
          </td>
          <td>{{ post.user_name|default:"-" }}</td>
          <td>-</td>
          <td>-</td>
          <td>-</td>
        </tr>
        {% empty %}
        <tr>
          <td colspan="8" class="text-center text-muted py-4">게시글이 없습니다.</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- 페이지네이션 -->
  <div class="text-center mt-3">
    {% if posts.has_previous %}
      <a href="?page={{ posts.previous_page_number }}" class="btn btn-outline-primary btn-sm">이전</a>
    {% endif %}
    <span class="mx-2">Page {{ posts.number }} / {{ posts.paginator.num_pages }}</span>
    {% if posts.has_next %}
      <a href="?page={{ posts.next_page_number }}" class="btn btn-outline-primary btn-sm">다음</a>
    {% endif %}
  </div>
</div>
{% endblock %}
